# 算法

### `AVL` 树和红黑树有什么区别

- `AVL`是高度平衡的二叉树，红黑树是近似平衡的二叉树
- 对于查询，`AVL`提供更快的查询，因为它是更严格的平衡
  - 查找树的时间复杂度为树的深度
  - `AVL`树的左右子树高度差必须满足小于2
  - 红黑树的左右子树的高度差小于两倍
- 对于插入和删除，红黑树提供了更快的插入和删除
  - `AVL`旋转的操作会更多
  - 红黑树旋转的操作相对较少
- 对于存储，两者都需要存储额外的信息，红黑对额外空间消耗更少
  - `AVL` 每个结点使用 `int` 来存储平衡因子或高度
  - 红黑树只需要使用  `bit` 来存储 0或1表示黑或红 
- 对于应用方向
  - 红黑树被应用对于大多数语言库的 `map` 或`set` 数据结构
  - `AVL` 被应用于检索更快的数据库中

##### `AVL`树的特点

- 左子树和右子树的高度差小于2
- 当两个子树的高度差大于1的时候进行重平衡整理

##### 红黑树的特点

- 具体来说，红黑树满足如下条件的二叉树
  - 每个结点要么是红色，要么是黑色
  - 根结点是黑色
  - 每个叶结点(`NIL`结点，空结点)是黑色的
  - 不能有相邻的两个红色结点
  - 从任何一个结点到其每个叶子的所有路径都包含相同数目的黑色结点
- 关键性质
  - 从根到叶子的最长的可能路径不多于最短的可能路径的两倍长

------

### `10`亿条数据包括 `id`，上线时间，下线时间，请绘制每一秒在线人数的曲线图

- 假设这10亿条数据是一天内的数据(也可以是一个月)，一天总共有`3600 * 24 = 86400`秒；
- 定义一个长度为 86400 的整数数组 `delta [86400]int`，每个整数对应这一秒的人数变化值，初始值为0；
- 然后一次读入每个用户的登录时间和退出时间，将与登录时间对应的整数值`+1`，将与退出时间对应的整数`-1`；
- 这样处理一遍后，数组中存储了每秒中的人数变化情况；
- 另外定义一个长度为 86400 的整数数组 `online [86400]int`，每个整数对应这一秒在线人数，初始值为0；
- 第1秒的人数为`online[0]=delta[0]`，第2秒的人数为`online[1]=online[0]+delta[1]`，一次类推，第`n`秒在线人数为 `online[n]=online[n-1]+delta[n]`;
- 这样就可以划出每一秒在线人数的曲线图

------

### 如何通过一个不均匀的硬币得到公平的结果？

- 这题的解法和：利用`Rand7()`实现`Rand10()` 类似

```go
// 连续抛两次硬币，得到的 (0,1)和(1,0)概率是相等的
// 则如果两次结果相同，重新抛，两次结果不同则说明公平

// 不均匀的硬币
func coin() int {
	// [0,3][4,9], 4:6
	if rand.Intn(10) > 4 {
		return 0
	} else {
		return 1
	}
}

// 两次结果不同，则表示概率相同，返回第一次抛的值
func coinResult() int {
	for {
		a := coin()
		if coin() != a {
			return a
		}
	}
}

func main()  {
	rand.Seed(time.Now().UnixNano())
	count := []int{0,0}
	for i := 0; i < 100000; i++ {
		count[coinResult()]++
	}
	fmt.Println(count)
}

```

