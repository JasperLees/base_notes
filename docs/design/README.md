# 消息队列

### 如何设计一个消息队列

------

### 设计一个阻塞队列

------

### kafka 如何保证消息一致性？

------

### Kafka 发送消息是如何保证可靠性的？

------

# 线程

### 如何设计一个线程池

------

### 高并发情景下，核心线程池该如何设置参数？


------

# 设计模式

### 什么是设计模式，描述几个常用的设计模式

------

### 简述生产消费者模式的流程

------

# 负载

### 简述 CAP 理论

------

### 简述常见的负载均衡算法

------

### 什么是 CAP ？什么是最终一致性？什么是幂等操作？

------

## 简述 Zookeeper 基础原理以及使用场景

------
### ZooKeeper 的 ZAB 算法与 Paxos 的区别是什么？

------
### 几种常见的限流算法

#### 1.计数器算法

##### 核心思想

- 对于某个接口，一段固定时间窗口内的请求进行计数；
- 如果请求数超过阈值，则舍弃请求；如果没有达到设定的阈值，则接受该请求，计数器+1；
- 当窗口时间结束，重置计数器；

##### 优点

- 容易实现

##### 缺点

- 窗口切换可能会产生两倍于阈值流量的请求；
- 例如:设置某接口每分钟只能有100个请求，一个恶意的用户，他在 10:59 瞬间发送100个请，并且11：00 又瞬间发送了100个请求；
- 用户可能通过这个漏洞，瞬间压垮为我们的应用；

#### 2.计数器滑动窗口算法

- 是固定窗口的升级版，将时间窗口分为多个小窗口，每个小窗口维护独立的计算器，所有小窗口计数器的总和不能超过大窗口的阈值；
- 移动时，左边的小窗口数据丢弃，将新加入的放入最右边，依次类推
- 这种方法解决了两倍阈值流量的问题；

#### 3. 漏斗算法

- 请求来到时，会先进入漏斗里，然后漏斗以恒定的速率将请求流出去，从而起到平滑流量的作用；
- 当请求的流量过大时，漏斗达到最大容量时会溢出，此时请求被丢弃；
- 从系统来看，请求永远是以平滑的传输速率过来的，从而起到保护系统的作用；

##### 缺点

- 无法解决流量突发问题

#### 4.令牌桶算法

- 对漏斗算法的改进，处理可以起到匀速限流，还可以允许一定程度的流量突发。
- 算法中，存在一个令牌桶，以恒定的速率向令牌桶放入令牌。令牌桶也有一定的容量，如果满了令牌就无法放进去了；
- 当请求来时，会首先到令牌桶取拿令牌，如果拿到了令牌，则该请求会被处理，并消耗拿到的令牌；如果令牌桶为空，则该请求会被丢弃。

------

## 应用

### 电商系统中，如何实现秒杀功能？如何解决商品的超卖问题？

------

### 假如明天是活动高峰？QPS 预计会翻10倍，你要怎么做？

------

### 停车场有有限个车位，有多个车来抢车位，设计一个系统需要根据车辆进入和离开停车场的时间进行计费

------

# 其他

### 简述 Git 的工作流

------
#### 简述 MapReduce 的原理

------
